v 20201211 2
C 47600 64400 1 180 1 pnp-3.sym
{
T 48500 63900 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 47600 64400 5 10 0 0 180 6 1
model-name=genericPNP
T 47600 64400 5 10 0 0 180 6 1
model=pnp
T 48100 64000 5 10 1 1 180 6 1
refdes=vol_comp_q2
}
N 45900 62100 45900 63400 4
N 44800 61600 45300 61600 4
C 45300 61100 1 0 0 npn-3.sym
{
T 46200 61600 5 10 0 0 0 0 1
device=NPN_TRANSISTOR
T 45300 61100 5 10 0 1 0 0 1
model-name=genericNPN
T 45300 61100 5 10 0 0 0 0 1
model=npn
T 45800 61500 5 10 1 1 0 0 1
refdes=vol_comp_q3
}
N 45900 60400 45900 61100 4
N 48200 62100 48200 63400 4
N 48200 64400 48200 65600 4
C 48800 61100 1 0 1 npn-3.sym
{
T 47900 61600 5 10 0 0 0 6 1
device=NPN_TRANSISTOR
T 48800 61100 5 10 0 1 0 6 1
model-name=genericNPN
T 48800 61100 5 10 0 0 0 6 1
model=npn
T 48300 61500 5 10 1 1 0 6 1
refdes=vol_comp_q4
}
N 48200 60400 48200 61100 4
N 45900 60400 48200 60400 4
N 43000 65600 48200 65600 4
N 49600 62700 48200 62700 4
C 46500 64400 1 180 0 pnp-3.sym
{
T 45600 63900 5 10 0 0 180 0 1
device=PNP_TRANSISTOR
T 46500 64400 5 10 0 0 180 0 1
model-name=genericPNP
T 46500 64400 5 10 0 0 180 0 1
model=pnp
T 46000 64000 5 10 1 1 180 0 1
refdes=vol_comp_q1
}
N 46700 63900 46700 63300 4
N 46700 63300 45900 63300 4
N 45900 64400 45900 65600 4
N 46500 63900 47600 63900 4
N 48800 61600 49600 61600 4
B 45300 63000 3700 1700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 46900 64300 9 10 1 0 0 0 2
Current
mirror
B 44900 60800 4300 1700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 46800 61500 9 10 1 0 0 0 2
Differential
pair
C 45600 57600 1 0 1 npn-3.sym
{
T 44700 58100 5 10 0 0 0 6 1
device=NPN_TRANSISTOR
T 45600 57600 5 10 0 1 0 6 1
model-name=genericNPN
T 45600 57600 5 10 0 0 0 6 1
model=npn
T 45100 58000 5 10 1 1 0 6 1
refdes=vol_comp_q5
}
N 45000 57400 45000 57600 4
C 45100 59800 1 90 1 resistor-2.sym
{
T 44750 59400 5 10 0 0 90 6 1
device=RESISTOR
T 45200 59400 5 10 1 1 180 6 1
value=3000
T 45200 59200 5 10 1 1 180 6 1
refdes=vol_comp_r1
}
N 45000 59800 45000 60200 4
N 45000 58600 45000 58900 4
N 47000 57400 47000 58300 4
N 46400 58800 45000 58800 4
N 45600 58100 45900 58100 4
N 45900 58100 45900 58800 4
C 46400 58300 1 0 0 npn-3.sym
{
T 46900 58700 5 10 1 1 0 0 1
refdes=vol_comp_q6
T 47300 58800 5 10 0 0 0 0 1
device=NPN_TRANSISTOR
T 46400 58300 5 10 0 1 0 0 1
model-name=genericNPN
T 46400 58300 5 10 0 0 0 0 1
model=npn
}
N 47000 59300 47000 60400 4
C 38300 65300 1 0 0 spice-subcircuit-LL-1.sym
{
T 38400 65600 5 10 0 1 0 0 1
device=spice-subcircuit-LL
T 38400 65700 5 10 1 1 0 0 1
refdes=A1
T 38400 65400 5 10 1 1 0 0 1
model-name=voltage_comparator
}
C 45000 61300 1 0 1 spice-subcircuit-IO-1.sym
{
T 44100 61700 5 10 0 1 0 6 1
device=spice-IO
T 44250 61850 5 10 1 1 180 6 1
refdes=P1
}
C 49400 61900 1 180 1 spice-subcircuit-IO-1.sym
{
T 50300 61500 5 10 0 1 180 6 1
device=spice-IO
T 50150 61350 5 10 1 1 0 6 1
refdes=P2
}
C 49400 63000 1 180 1 spice-subcircuit-IO-1.sym
{
T 50300 62600 5 10 0 1 180 6 1
device=spice-IO
T 50150 62450 5 10 1 1 0 6 1
refdes=P3
}
C 47200 65900 1 0 1 spice-subcircuit-IO-1.sym
{
T 46300 66300 5 10 0 1 0 6 1
device=spice-IO
T 46450 66450 5 10 1 1 180 6 1
refdes=P4
}
N 47000 66200 47100 66200 4
N 47100 66200 47100 65600 4
C 46100 56400 1 0 1 spice-subcircuit-IO-1.sym
{
T 45200 56800 5 10 0 1 0 6 1
device=spice-IO
T 45350 56950 5 10 1 1 180 6 1
refdes=P5
}
N 45000 57400 47000 57400 4
N 45900 56700 46000 56700 4
N 46000 56700 46000 57400 4
N 45000 60200 43000 60200 4
N 43000 60200 43000 65600 4
C 38500 62000 1 0 0 voltage-comparator.sym
{
T 40200 62850 5 10 0 0 0 0 1
device=V_COMPARATOR
T 39500 62800 5 10 1 1 0 0 1
device=voltage_comparator
T 38800 62900 5 10 1 1 0 0 1
refdes=X?
T 38500 61800 5 10 1 0 0 0 1
graphical=1
}
T 50500 61300 9 10 1 0 0 0 2
Reference 
Voltage
T 43500 61800 9 10 1 0 0 0 2
Input
Voltage
T 46000 66200 9 10 1 0 0 0 1
Vcc
T 45300 56300 9 10 1 0 0 0 1
Vee
T 50400 62600 9 10 1 0 0 0 1
output
T 41000 66700 9 10 1 0 0 0 3
To make this work in the test circuit you need the cir file:

lepton-netlist -g spice-sdb -o comparator.SUBCKT.cir comparator.SUBCKT.sch
